<!-- breadcrumb-area start -->
<div class="breadcrumb-area">
  <div class="container">
    <div class="row align-items-center justify-content-center">
      <div class="col-12 text-center">
        <h2 class="breadcrumb-title">Shop</h2>
        <!-- breadcrumb-list start -->
        <ul class="breadcrumb-list">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
          <li class="breadcrumb-item active">Cart</li>
        </ul>
        <!-- breadcrumb-list end -->
      </div>
    </div>
  </div>
</div>

<!-- breadcrumb-area end -->

<!-- Cart Area Start -->
<div class="cart-main-area pt-100px pb-100px">
  <div class="container">
    <h3 class="cart-page-title">Your cart items</h3>
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12 col-12">
        <form action="#">
          <div class="table-content table-responsive cart-table-content">
            <table>
              <thead>
              <tr>
                <th>Image</th>
                <th>Product Name</th>
                <th>Price</th>
                <th>Qty</th>
                <th>Subtotal</th>
                <th>Action</th>
              </tr>
              </thead>
              <tbody>
              <% @cart_items.each do |item| %>
                <%= form_with model: item do |f|%>
              <tr>
                <td class="product-thumbnail">
                  <a href="#"><%= image_tag(item.product.image.small_preview.url, alt: "Product image", size: "250x350") if item.product.image? %></a>
                </td>
                <td class="product-name"><a href="#"><%= item.product.title%></a></td>
                <td class="product-price-cart"><span class="amount"></span></td>
                <td class="product-quantity">
                  <div class="cart-plus-minus">
                    <%= f.number_field :quantity, value: item.quantity.to_i, class: "cart-plus-minus-box"%>
                  </div>
                </td>
                <td class="product-subtotal"></td>
                <td class="product-remove">
                  <a href="<%=cart_items_update_path(item) %>"><i class="fa fa-pencil"></i></a>
                  <%= link_to "", item, method: :delete, remote: true, class: "fa fa-times" %>
                  <%#= link_to "", item, method: :put, class: "fa fa-pencil" %>
                </td>
              </tr>
                <% end%>
              <% end %>
              </tbody>
              <tfoot>
              <tr>
                <td colspan="6", align="right"><h3>Your current order has a total of: <%= CartItem.all.count %> items</h3></td>
              </tr>
              </tfoot>
            </table>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="cart-shiping-update-wrapper">
                <div class="cart-shiping-update">
                  <a href="#">Continue Shopping</a>
                </div>
                <div class="cart-clear">
                  <button>Update Shopping Cart</button>
                  <a href="#">Clear Shopping Cart</a>
                </div>
              </div>
            </div>
          </div>
        </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Cart Area End -->

<%# @cart_items.each do |item| %>
<!--  <h3><%#= item.product.title%></h3>-->
<!--  <h3><%#= item.product.description %></h3>-->

  <%#= form_with model: item do |f|%>
    <%#= f.hidden_field :product_id, value: item.product.id %>
    <%#= f.number_field :quantity, value: item.quantity.to_i%>
    <%#= f.submit "Update Cart" %>
    <%#= link_to "Remove Items", item, method: :delete, remote: true %>
  <%# end%>
<%# end %>
